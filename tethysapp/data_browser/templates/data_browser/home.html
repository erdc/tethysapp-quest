{% extends "data_browser/base.html" %}
{% load staticfiles tethys_gizmos %}



{% block app_content %}
  {% gizmo map_view map_view_options %}
  <div id="collection-details-container" class="app-content">
    <!--<button id="minimize-collection-details" type="button" class="btn btn-default btn-sm">-</button>-->
    <div id="collection-details-content" class="tab-content">
      {% for collection in collections %}
        {% include 'data_browser/details_table.html' with collection=collection columns=collection.table_view_options.column_names rows=collection.table_view_options.rows %}
      {% endfor %}
    </div>

    <!-- Download/Filter/Visualize Options Modal -->
    <div class="modal fade" id="options-modal" tabindex="-1" role="dialog" aria-labelledby="options-modal">
      <div class="modal-dialog" role="document">
        <div class="modal-content" id="options-content">
          {% gizmo select_input None %}
          {% gizmo date_picker None %}
        </div>
      </div>
    </div>

    <!-- Visualize Modal -->
    <div class="modal fade" id="visualize-modal" tabindex="-1" role="dialog" aria-labelledby="options-modal">
      <div class="modal-dialog" id="visualize-modal-container" role="document">
        <div class="modal-content" id="visualize-content">
          {% gizmo plot_view None %}
        </div>
      </div>
    </div>

  </div>
{% endblock %}

{% block app_actions %}
  <div id="collection-details-nav">
    <ul class="nav nav-pills nav-justified" role="tablist">
      {% for collection in collections %}
        <li role="presentation" class="nav-tab {{ collection.name }}-collection"><a href="#collection-detail-{{ collection.name }}" aria-controls="collection-detail-{{ collection.name }}" role="tab" data-toggle="tab">{{ collection.display_name }}</a></li>
      {% endfor %}
    </ul>
  </div>
{% endblock %}

{% block scripts %}
  {{ block.super }}
  <script>
    var get_download_options_url = '{% url 'data_browser:get_download_options_workflow' %}';
    var get_filter_options_url = '{% url 'data_browser:get_filter_options_workflow' %}';
    var get_visualize_options_url = '{% url 'data_browser:get_visualize_options_workflow' %}';
    var get_features_url = '{% url 'data_browser:get_features' %}';
    var services = {% autoescape off %}{{ services }}{% endautoescape %};
    var collections = {% autoescape off %}{{ collections_json }}{% endautoescape %};
    var source_urls = [];
    <!--[{% for service in services %}'{% url 'data_browser:get_features' %}?service={{ service }}', {% endfor %}];-->
  </script>
  <script src="{% static 'data_browser/js/main.js' %}" type="text/javascript"></script>
  <script src="{% static 'data_browser/js/map.js' %}" type="text/javascript"></script>
{% endblock %}